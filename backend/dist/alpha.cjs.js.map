{"version":3,"file":"alpha.cjs.js","sources":["../src/plugin.ts"],"sourcesContent":["import { loggerToWinstonLogger } from '@backstage/backend-common';\nimport { coreServices, createBackendPlugin } from '@backstage/backend-plugin-api';\n\nimport { createRouter } from './service/router';\n\n/**\n * The progressive-delivery backend plugin.\n *\n * @alpha\n */\nexport const progressive_deliveryPlugin = createBackendPlugin({\n  pluginId: 'plugin-progressive-delivery',\n  register(env) {\n    env.registerInit({\n      deps: {\n        logger: coreServices.logger,\n        config: coreServices.rootConfig,\n        http: coreServices.httpRouter,\n      },\n      async init({ config, logger, http }) {\n        logger.info(\"Initing progressive-delivery plugin\");\n        http.use(() => createRouter({...config, logger: loggerToWinstonLogger(logger)}));\n      },\n    });\n  },\n});\n"],"names":["createBackendPlugin","coreServices","createRouter","loggerToWinstonLogger"],"mappings":";;;;;;;;;;AAUO,MAAM,6BAA6BA,oCAAoB,CAAA;AAAA,EAC5D,QAAU,EAAA,6BAAA;AAAA,EACV,SAAS,GAAK,EAAA;AACZ,IAAA,GAAA,CAAI,YAAa,CAAA;AAAA,MACf,IAAM,EAAA;AAAA,QACJ,QAAQC,6BAAa,CAAA,MAAA;AAAA,QACrB,QAAQA,6BAAa,CAAA,UAAA;AAAA,QACrB,MAAMA,6BAAa,CAAA,UAAA;AAAA,OACrB;AAAA,MACA,MAAM,IAAK,CAAA,EAAE,MAAQ,EAAA,MAAA,EAAQ,MAAQ,EAAA;AACnC,QAAA,MAAA,CAAO,KAAK,qCAAqC,CAAA,CAAA;AACjD,QAAK,IAAA,CAAA,GAAA,CAAI,MAAMC,mBAAA,CAAa,EAAC,GAAG,MAAQ,EAAA,MAAA,EAAQC,mCAAsB,CAAA,MAAM,CAAC,EAAC,CAAC,CAAA,CAAA;AAAA,OACjF;AAAA,KACD,CAAA,CAAA;AAAA,GACH;AACF,CAAC;;;;"}